<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <style>
    body { margin:0;position:fixed;top:0;right:0;bottom:0;left:0;font-family : 'Arial'; font-size: 15}
    rect { opacity:1;}
  </style>
</head>

<body>
<div>
  <script>
    // Feel free to change or delete any of the code you see in this editor!
    var margin = {top : 20,left: 20, right: 20, bottom: 20}
    
    var svg = d3.select("body").append("svg")
      .attr("width", 960)
      .attr("height", 500)

    // gare 1 selectionnée virtuellement 
    var gare1 = 713040  //384008 //
    // gare 2 selectionnée virtuellement
    var gare2 = 271007
    
    
    // emplacement du text 'nom des gares'
    svg.append("text")
    	.attr("id","nom")
      .text("Nom des gares")
      .attr("y", 0 + margin.top)
      .attr("x", 0 + margin.left)
    	.attr("text-anchor","start")
    
    // emplacement du nom de la gare 1
    svg.append("text")
    	.attr("id","nom1")
      .text("")
      .attr("y", 0 + margin.top)
      .attr("x", 395 + margin.left)
    	.attr("text-anchor","end")
    
    // emplacement du nom de la gare 2
    svg.append("text")
    	.attr("id","nom2")
      .text("")
      .attr("y", 0 + margin.top)
      .attr("x", 405 + margin.left)
    	.attr("text-anchor","start")
    
    
		// emplacement du text 'nombre de voyageurs'
    svg.append("text")
    	.attr("id","Nombre de voyageurs")
      .text("Nombre de voyageurs")
      .attr("y", 50 + margin.top)
      .attr("x", 0 + margin.left)
    	.attr("text-anchor","start")
    
    // emplacement de la valeur correspondante pour la gare 1
    svg.append("text")
    	.attr("id","valeur_voyageurs")
    	.text("")
      .attr("y", 50 + margin.top)
      .attr("x", 395 + margin.left)
    	.attr("text-anchor","end")
    
    // emplacement de la valeur correspondante pour la gare 2
    svg.append("text")
    	.attr("id","valeur_voyageurs2")
    	.text("")
      .attr("y", 50 + margin.top)
      .attr("x", 405 + margin.left)
    	.attr("text-anchor","start")
    
    // emplacement du text 'variation par rapport à 2015'
    svg.append("text")
    	.attr("id","Variation")
      .text("Variation par rapport à 2015")
      .attr("y", 100 + margin.top)
      .attr("x", 0 + margin.left)
    	.attr("text-anchor","start")
    
    // emplacement de la valeur correspondante pour la gare 1
    svg.append("text")
    	.attr("id","valeur_variation")
    	.text("")
      .attr("y", 100 + margin.left)
      .attr("x", 395 + margin.top)
    	.style("text-anchor","end")
    
    // emplacement de la valeur correspondante pour la gare 2
    svg.append("text")
    	.attr("id","valeur_variation2")
    	.text("")
      .attr("y", 100 + margin.left)
      .attr("x", 405 + margin.top)
    	.style("text-anchor","start")
    
    // emplacement du text 'Divertissement'
    svg.append("text")
    	.attr("id","Wifi")
      .text("Divertissements")
      .attr("y", 168 + margin.top)
      .attr("x", 0 + margin.left)
    	.attr("text-anchor","start")
    
	var g_wifi = svg.append("g")
    
	var g_babyfoot = svg.append("g")
    
	var g_power = svg.append("g")
  
  var g_piano = svg.append("g")
  
	var g_book = svg.append("g")
  
	var histo_acces = svg.append("g")
  .attr("transform","translate("+30+","+250+")")
 	
  var y_motif = d3.scaleBand()
    	.domain(['Divers','Travail quoti.','Etudes','Travail Occasionnel','Loisirs'])
    	.range([0, +d3.select("svg").attr("height")/2])
  
  var x_motif = d3.scaleLinear()
    .range([0, +d3.select("svg").attr("width")/2.5])
    
  var xAxis_motif = d3.axisLeft()
		.scale(y_motif)
  
  var histo_motif = svg.append("g")
  .attr("transform","translate("+490+","+230+")")
  
  var axe_histo_motif = svg.append("g")
  	.attr("transform","translate("+490+","+230+")")
  	.attr('class','x axis')
  	.call(xAxis_motif)

  
  
// début csv
d3.csv("all-joined-datasets.csv",function(data){

  var divertissements1 = [{uic: gare1}] //json avec les divertissements en gare1
  var divertissements2 = [{uic: gare2}] //json avec les divertissements en gare2
  
  var acces1 = [{uic: gare1}] //json avec les moyens d'acces en gare1
  var acces2 = [{uic: gare2}] //json avec les moyens d'acces en gare2
  
  var motif1 = [{uic: gare1}] //json avec les motif d'arrivé en gare1
  var motif2 = [{uic: gare2}] //json avec les motif d'arrivé en gare2
  
  //parcour des données
  data.forEach(function(d){
    // text
    d.nbvoy = d.voyageurs_2016
    d.variation = (+d.voyageurs_2016-+d.voyageurs_2015)/(d.voyageurs_2015)
    d.uic = d.Code_UIC
    d.nom = d.Nom_de_la_gare
    // icones
    d.wifi = d.Wifi
    d.baby_foot = d.Baby_Foot
    d.powerstation = d.Power_Station
    d.piano = d.Piano
    d.histoires = d.Distr_Histoires_Courtes
    // moyens d'acces
    d.voiture = +d.deux_roues_motorisees + +d.Autres_voitures_location_autopartage + +d.Voiture_Conducteur + +d.Voiture_passager + +d.Taxis
    d.transports = +d.Bus_Car_Navette + +d.Metro_RER + +d.Tramway 
    d.marche = +d.Marche
    d.velo = +d.Velo
    
    d.divers = +d.Demarches_administratives_medicales_ou_achat 	 	 	 	
    d.commute = +d.Deplacement_domicile_travail_habituel
    d.etudes = +d.Deplacement_domicile_etude_y_compris_stage
    d.occasionnel = +d.Deplacement_professionnel_occasionnel
    d.loisirs = +d.Loisirs_vacances_visite_d_un_proche_ou_ami
    
    
    
   
	
	if(d.uic == gare1){
		divertissements1.push({wifi: d.wifi,
													 baby_foot: d.baby_foot,
													 powerstation: d.powerstation,
													 piano: d.piano,
													 histoires: d.histoires})
    
    acces1.push({voiture: d.voiture,
    						 transports: d.transports,
    						 marche: d.marche,
    						 velo: d.velo})
    
    motif1.push({divers: d.divers,
                 commute: d.commute,
                 etudes: d.etudes,
    						 occasionnel: d.occasionnel,
   							 loisirs: d.loisirs})
  }  
	if(d.uic == gare2){
		divertissements2.push({wifi: d.wifi,
													 baby_foot: d.baby_foot,
													 powerstation: d.powerstation,
													 piano: d.piano,
													 histoires: d.histoires})
    
    acces2.push({voiture: d.voiture,
    						 transports: d.transports,
    						 marche: d.marche,
    						 velo: d.velo})
    
    motif2.push({divers: d.divers,
                 commute: d.commute,
                 etudes: d.etudes,
    						 occasionnel: d.occasionnel,
   							 loisirs: d.loisirs})
  }
	})// fin forEach

	var max1 = d3.max([motif1[1].divers,motif1[1].commute,motif1[1].etudes,motif1[1].loisirs,motif1[1].occasionnel])
  var max2 = d3.max([motif2[1].divers,motif2[1].commute,motif2[1].etudes,motif2[1].loisirs,motif2[1].occasionnel])
  
  var max_motif = d3.max([max1,max2])
  console.log(max_motif)
  x_motif.domain([0,max_motif])
  
  var yAxis_motif = d3.axisBottom()
		.scale(x_motif);
  var axey_histo_motif = svg.append("g")
  	.attr("transform","translate("+490+","+480+")")
  	.attr('class','y axis')
  	.call(yAxis_motif)
  
  
  //refresh(data,divertissements1,divertissements2)
	refreshText(data,gare1,gare2)
  refreshWifi(divertissements1,divertissements2)
  refreshBaby(divertissements1,divertissements2)
  refreshPower(divertissements1,divertissements2)
  refreshPiano(divertissements1,divertissements2)
  refreshBook(divertissements1,divertissements2)
  d3.selectAll("rect")
    	.attr("width",18)
    	.attr("height",36)
  		.attr("rx", 4)
    	.attr("ry", 4)
  refreshAcces(acces1,acces2)
  refreshMotif(motif1,motif2);
})// fin csv


// Définition des fonctions

function refreshText(data,gare1,gare2){
  
  data.forEach(function(d){
    if(d.uic == gare1){
			d3.select("#valeur_voyageurs")
  		.text(d3.format(".3s")(d.nbvoy))
      .attr("fill","blue")
  
  		d3.select("#valeur_variation")
  		.text(d3.format(".0%")(d.variation))
      .attr("fill","blue")
      
      d3.select("#nom1")
  		.text(d.nom)
      .attr("fill","blue")

      ;} // fin if
    
    else if(d.uic == gare2){
      d3.select("#valeur_voyageurs2")
  		.text(d3.format(".3s")(d.nbvoy))
      .attr("fill","Orange")
  
  		d3.select("#valeur_variation2")
  		.text(d3.format(".0%")(d.variation))
      .attr("fill","Orange")
      
      d3.select("#nom2")
  		.text(d.nom)
      .attr("fill","Orange")
  
      ;}// fin else if
  ;}) // fin forEach
;} // fin refresh

function refreshWifi(div1,div2){
if(div1[1].wifi == "false" && div2[1].wifi == "false"){}
else{    
  //creation du logo & positionnement 
  
  
  // emplacement de la valeur wifi pour la gare 1
    g_wifi.append("rect")
    	.attr("id","valeur_wifi")
      .attr("y", 140 + margin.left)
      .attr("x", 270 + margin.top)
	 	 	.style("fill",function(){if(div1[1].wifi=="true"){return "#4d4dff"}
                             else{return "lightgrey"}})

    // emplacement de la valeur wifi pour la gare 2
    g_wifi.append("rect")
    	.attr("id","valeur_wifi2")
      .attr("y", 140 + margin.left)
      .attr("x", 288 + margin.top)
	  	.style("fill",function(){if(div2[1].wifi=="true"){return "DarkOrange"}
                             else{return "lightgrey"}})
    
g_wifi.append("path")
		.attr("id","path_wifi")
		.attr("d","M0,146.93c2.44-6.87,7.4-11.36,13.32-15.39C68,94.27,127.92,70,193.55,60.83c112-15.68,214.64,8.85,308,72.69A29,29,0,0,1,512,146.93v9c-3.81,9-9.67,15.3-20.35,15.28-4.91,0-9-2-12.87-4.72-41-28.73-85.82-49.46-134.72-60.22Q177,69.54,34.84,165.37c-4.16,2.81-8.22,5.57-13.52,5.8C10.17,171.67,4,165.34,0,155.93v-9Z")
	g_wifi.append("path")
		.attr("id","path_wifi")
		.attr("d","M422.62,249.08c-4.29.19-8.32-1.53-12.11-4.18-36.07-25.25-75.92-41.14-119.59-46.63q-93.66-11.77-174.76,37.07c-5.13,3.09-10,6.52-15,9.8-10.2,6.68-22.21,4.66-28.6-4.82s-4-21.09,5.88-28C117.56,184.87,160.66,167,208,159.86c79.81-12,153.39,4.53,220.69,49.05a74.62,74.62,0,0,1,7.3,5.23,19.67,19.67,0,0,1,5.62,22.23C438.69,244.07,431.42,249,422.62,249.08Z")
	g_wifi.append("path")
		.attr("id","path_wifi")
		.attr("d","M353.72,327a19.38,19.38,0,0,1-11.64-3.81c-29.65-20.36-62.49-28.94-98.27-26.26a145.19,145.19,0,0,0-72.55,25.41c-6.16,4.23-12.59,6.1-19.76,3.52-7.75-2.79-12.28-8.56-13.24-16.64s2.33-14.31,8.86-18.88a178.83,178.83,0,0,1,65.23-28.79c54.58-11.77,105.41-2.86,152,28.45,8.2,5.51,11.31,14.2,8.6,23A20,20,0,0,1,353.72,327Z")
	g_wifi.append("path")
		.attr("id","path_wifi")
		.attr("d","M256.44,355.87A49.92,49.92,0,0,1,306,406.06c-0.08,27.33-22.74,49.8-50.13,49.7a50.15,50.15,0,0,1-49.77-50.55C206.23,377.84,228.79,355.75,256.44,355.87Z")
  
  
	d3.selectAll("#path_wifi").attr("transform","scale(0.05) translate("+ d3.select("#valeur_wifi").attr("x")/0.0493 +",3270)")
} 
}    

function refreshBaby(div1,div2){

if(div1[1].baby_foot == "0" && div2[1].baby_foot == "0"){}
else if(div1[1].baby_foot == "" && div2[1].baby_foot == ""){}
else if(div1[1].baby_foot == "0" && div2[1].baby_foot == ""){}
else if(div1[1].baby_foot == "" && div2[1].baby_foot == "0"){}
else{    
    // emplacement de la valeur babyfoot pour la gare 1
    g_babyfoot.append("rect")
	  .attr("id","valeur_babyfoot")
      .attr("y", 140 + margin.left)
      .attr("x", 324 + margin.top)
	 	 	.style("fill",function(){if(+div1[1].baby_foot>0){return "#4d4dff"}
                             else{return "lightgrey"}})

    // emplacement de la valeur babyfoot pour la gare 2
    g_babyfoot.append("rect")
    	.attr("id","valeur_babyfoot2")
      .attr("y", 140 + margin.left)
      .attr("x", 342 + margin.top)
	  	.style("fill",function(){if(+div2[1].baby_foot>0){return "DarkOrange"}
                             else{return "lightgrey"}})
    
    g_babyfoot.append("path")
    .attr("id","path_babyfoot") 		    .attr("d","M32,31a8.5,8.5,0,1,0-8.5-8.5A8.50951,8.50951,0,0,0,32,31Zm0-15a6.5,6.5,0,1,1-6.5,6.5A6.50753,6.50753,0,0,1,32,16Z")
    
    g_babyfoot.append("path")
    .attr("id","path_babyfoot") 		    .attr("d","M68,31a8.5,8.5,0,1,0-8.5-8.5A8.50951,8.50951,0,0,0,68,31Zm0-15a6.5,6.5,0,1,1-6.5,6.5A6.50753,6.50753,0,0,1,68,16Z")
    
    g_babyfoot.append("path")
    .attr("id","path_babyfoot")
    .attr("d","M95,43H79.65576l.34033-3.91357a.99935.99935,0,0,0-.25293-.75538l-4.5-5a1.00175,1.00175,0,0,0-.96826-.30566L68,34.47363l-6.2749-1.44824a1.0014,1.0014,0,0,0-.96826.30566l-4.5,5a.99935.99935,0,0,0-.25293.75538L56.34424,43H43.65576l.34033-3.91357a.99935.99935,0,0,0-.25293-.75538l-4.5-5a1.00244,1.00244,0,0,0-.96826-.30566L32,34.47363l-6.2749-1.44824a1.00072,1.00072,0,0,0-.96826.30566l-4.5,5a.99935.99935,0,0,0-.25293.75538L20.34424,43H5a1,1,0,0,0-1,1v6.5a1,1,0,0,0,1,1H21.65265l1.95282,1.541,1.644,21.13671-2.71728,2.74366a.99882.99882,0,0,0-.28955.70361V85a1,1,0,0,0,1,1H40.75732a1,1,0,0,0,1-1V77.625a.99882.99882,0,0,0-.28955-.70361l-2.71728-2.74366,1.644-21.13671L42.34735,51.5h15.3053l1.95282,1.541,1.644,21.13671-2.71728,2.74366a.99882.99882,0,0,0-.28955.70361V85a1,1,0,0,0,1,1H76.75732l.00428-.00085a8.49959,8.49959,0,1,0-1.62085-16.84253L76.39453,53.041,78.34735,51.5H95a1,1,0,0,0,1-1V44A1,1,0,0,0,95,43ZM6,49.5V45H20.51813l.39129,4.5Zm35.041.48291-2.229,1.75928a1.00111,1.00111,0,0,0-.37744.70752L36.7207,74.479a.99955.99955,0,0,0,.28662.78125l2.75,2.77637V84H24.24268V78.03662l2.75-2.77637a.99955.99955,0,0,0,.28662-.78125L25.56543,52.44971a1.00111,1.00111,0,0,0-.37744-.70752l-2.229-1.75928-.00836-.09613-.51507-5.97272c-.00074-.0083-.00562-.01495-.00653-.02319l-.39533-4.54468,3.81543-4.23926,5.92578,1.36768a1.00111,1.00111,0,0,0,.4502,0l5.92578-1.36768,3.81543,4.23926ZM43.09082,49.5l.3916-4.5H56.51813l.39129,4.5ZM76.74463,71a6.5,6.5,0,1,1-6.5,6.5A6.50753,6.50753,0,0,1,76.74463,71ZM77.041,49.98291l-2.229,1.75928a1.00111,1.00111,0,0,0-.37744.70752l-1.35333,17.392A8.48072,8.48072,0,0,0,71.27863,84h-11.036V78.03662l2.75-2.77637a.99955.99955,0,0,0,.28662-.78125L61.56543,52.44971a1.00111,1.00111,0,0,0-.37744-.70752l-2.229-1.75928-.00836-.09613-.51507-5.97272c-.00074-.0083-.00562-.01495-.00653-.02319l-.39533-4.54468,3.81543-4.23926,5.92578,1.36768a1.00111,1.00111,0,0,0,.4502,0l5.92578-1.36768,3.81543,4.23926ZM94,49.5H79.09131l.39453-4.5H94Z")
        
    d3.selectAll("#path_babyfoot").attr("stroke","black")
    															.attr("stroke-width","2")
    
    d3.selectAll("#path_babyfoot").attr("transform","scale(0.35) translate("+ d3.select("#valeur_babyfoot").attr("x")/0.35 +","+d3.select("#valeur_babyfoot").attr("y")/0.35+")")
}
} 

function refreshPower(div1,div2){
if(+div1[1].powerstation == 0 && +div2[1].powerstation == 0){}
else{    
  	
    // emplacement de la valeur prise de courant pour la gare 1
    g_power.append("rect")
    	.attr("id","valeur_powerstation")
      .attr("y", 140 + margin.left)
      .attr("x", 378 + margin.top)
	  	.style("fill",function(){if(+div1[1].powerstation>0){return "#4d4dff"}
                             else{return "lightgrey"}})

    
    // emplacement de la valeur prise de courant pour la gare 2
    g_power.append("rect")
    	.attr("id","valeur_powerstation2")
      .attr("y", 140 + margin.left)
      .attr("x", 396 + margin.top)
	  	.style("fill",function(){if(+div2[1].powerstation>0){return "DarkOrange"}
                             else{return "lightgrey"}})
    
    g_power.append("path")
    .attr("id","path_power")    
    .attr("d","M80.6,54.5c0,1.7-1.4,3.2-3.2,3.2h-9.2c-4.4,0-7.9,3.5-7.9,7.9v0.1c0,8-6.7,14.5-14.7,14.2C38,79.6,32,73,32,65.3v-6.7  c-7.2-1.5-12.6-7.8-12.6-15.5v-8c0-1.1,0.9-2.1,2.1-2.1h3.9v-10c0-1.7,1.5-3.1,3.2-2.9c1.5,0.1,2.7,1.5,2.7,3.1v9.9h7.8v-10  c0-1.7,1.5-3.1,3.3-2.9c1.5,0.1,2.7,1.5,2.7,3.1v9.9h3.9c1.1,0,2,0.9,2,2v8c0,7.6-5.4,14-12.6,15.5v7c0,4.7,4.1,8.4,8.9,7.8  c4-0.5,6.9-4.1,6.9-8.1c0-7.7,6.3-14,14.1-14h9.3C79.2,51.3,80.6,52.8,80.6,54.5z")
    
    d3.selectAll("#path_power").attr("transform","scale(0.4) translate("+ d3.select("#valeur_powerstation").attr("x")/0.398 +","+d3.select("#valeur_powerstation").attr("y")/0.4+")")
}
}

function refreshPiano(div1,div2){
if(+div1[1].piano == 0 && +div2[1].piano == 0){}
else{
    // emplacement de la valeur piano pour la gare 1
    g_piano.append("rect")
    	.attr("id","valeur_piano")
      .attr("y", 140 + margin.left)
      .attr("x", 432 + margin.top)
    	.style("fill",function(){if(+div1[1].piano>0){return "#4d4dff"}
                               else{return "lightgrey"}})

    // emplacement de la valeur piano pour la gare 2
    g_piano.append("rect")
    	.attr("id","valeur_piano2")
      .attr("y", 140 + margin.left)
      .attr("x", 450 + margin.top)
    	.style("fill",function(){if(+div2[1].piano>0){return "DarkOrange"}
                               else{return "lightgrey"}})
    
    g_piano.append("path")
    .attr("id","path_piano")
    .attr("d","M86.839,28.146H11.431c-0.568,0-1.028,0.46-1.028,1.028v41.145c0,0.568,0.46,1.028,1.028,1.028h75.408  c0.568,0,1.028-0.46,1.028-1.028V29.174C87.867,28.606,87.406,28.146,86.839,28.146z M20.637,67.78c0,0.839-0.68,1.519-1.519,1.519  h-5.596c-0.839,0-1.519-0.68-1.519-1.519V39.481c0-0.839,0.68-1.519,1.519-1.519h4.728c-0.108,0.209-0.175,0.443-0.175,0.694v18.228  c0,0.839,0.68,1.519,1.519,1.519h1.043V67.78z M30.013,67.78c0,0.839-0.68,1.519-1.519,1.519h-5.596  c-0.839,0-1.519-0.68-1.519-1.519v-9.376h1.036c0.839,0,1.519-0.68,1.519-1.519V38.656c0-0.252-0.067-0.485-0.175-0.694h3.805  c-0.108,0.209-0.175,0.443-0.175,0.694v18.228c0,0.839,0.68,1.519,1.519,1.519h1.106V67.78z M39.388,67.78  c0,0.839-0.68,1.519-1.519,1.519h-5.596c-0.839,0-1.519-0.68-1.519-1.519v-9.376h0.973c0.839,0,1.519-0.68,1.519-1.519V38.656  c0-0.252-0.067-0.485-0.175-0.694h4.798c0.839,0,1.519,0.68,1.519,1.519V67.78z M48.764,67.78c0,0.839-0.68,1.519-1.519,1.519  h-5.596c-0.839,0-1.519-0.68-1.519-1.519V39.481c0-0.839,0.68-1.519,1.519-1.519h4.742c-0.108,0.209-0.175,0.443-0.175,0.694v18.228  c0,0.839,0.68,1.519,1.519,1.519h1.029V67.78z M58.139,67.78c0,0.839-0.68,1.519-1.519,1.519h-5.596  c-0.839,0-1.519-0.68-1.519-1.519v-9.376h1.05c0.839,0,1.519-0.68,1.519-1.519V38.656c0-0.252-0.067-0.485-0.175-0.694h3.856  c-0.108,0.209-0.175,0.443-0.175,0.694v18.228c0,0.839,0.68,1.519,1.519,1.519h1.041V67.78z M67.515,67.78  c0,0.839-0.68,1.519-1.519,1.519H60.4c-0.839,0-1.519-0.68-1.519-1.519v-9.376h1.039c0.839,0,1.519-0.68,1.519-1.519V38.656  c0-0.252-0.067-0.485-0.175-0.694h3.889c-0.108,0.209-0.175,0.443-0.175,0.694v18.228c0,0.839,0.68,1.519,1.519,1.519h1.019V67.78z   M76.89,67.78c0,0.839-0.68,1.519-1.519,1.519h-5.596c-0.839,0-1.519-0.68-1.519-1.519v-9.376h1.06c0.839,0,1.519-0.68,1.519-1.519  V38.656c0-0.252-0.067-0.485-0.175-0.694h4.711c0.839,0,1.519,0.68,1.519,1.519V67.78z M86.266,67.78  c0,0.839-0.68,1.519-1.519,1.519h-5.596c-0.839,0-1.519-0.68-1.519-1.519V39.481c0-0.839,0.68-1.519,1.519-1.519h5.596  c0.839,0,1.519,0.68,1.519,1.519V67.78z")
    
    d3.selectAll("#path_piano").attr("transform","scale(0.4) translate("+ d3.select("#valeur_piano2").attr("x")/0.4175 +","+d3.select("#valeur_piano").attr("y")/0.4+")")
    
}
}

function refreshBook(div1,div2){
if(+div1[1].histoires == 0 && +div2[1].histoires == 0){}
else{
  
  // emplacement de la valeur histoires pour la gare 1
    g_book.append("rect")
    	.attr("id","valeur_histoire")
    	.attr("y", 140 + margin.left)
      .attr("x", 486 + margin.top)
    	.style("fill",function(){if(+div1[1].histoires>0){return "#4d4dff"}
                               else{return "lightgrey"}})                      

    // emplacement de la valeur histoires pour la gare 2
    g_book.append("rect")
    	.attr("id","valeur_histoire2")  	
      .attr("y", 140 + margin.left)
      .attr("x", 504 + margin.top)
    	.style("fill",function(){if(+div2[1].histoires>0){return "DarkOrange"}
                               else{return "lightgrey"}})
    
    g_book.append("path")
    .attr("id","path_book")
    .attr("d","")
    
    g_book.append("path")
    .attr("id","path_book")
    .attr("d","")
    
    g_book.append("path")
    .attr("id","path_book")
    .attr("d","")
    
    g_book.append("path")
    .attr("id","path_book")
    .attr("d","M 7.6875 15 A 3.0003 3.0003 0 0 0 5 18 L 5 76 A 3.0003 3.0003 0 0 0 8 79 L 39 79 C 43.349431 79 45.826032 80.37085 47.3125 83.34375 A 3.0003 3.0003 0 0 0 52.6875 83.34375 C 54.173968 80.37085 56.650569 79 61 79 L 92 79 A 3.0003 3.0003 0 0 0 95 76 L 95 18 A 3.0003 3.0003 0 0 0 92 15 L 61 15 C 56.682807 15 52.632819 17.03124 50 20.15625 C 47.367181 17.03124 43.317193 15 39 15 L 8 15 A 3.0003 3.0003 0 0 0 7.6875 15 z M 11 21 L 39 21 C 42.934608 21 47 24.81488 47 28 L 47 74.9375 C 44.656312 73.666773 41.924501 73 39 73 L 11 73 L 11 21 z M 61 21 L 89 21 L 89 73 L 61 73 C 58.075499 73 55.343688 73.666773 53 74.9375 L 53 28 C 53 24.81488 57.065392 21 61 21 z M 17.6875 26 A 3.0040663 3.0040663 0 1 0 18 32 L 38 32 A 3.0003 3.0003 0 1 0 38 26 L 18 26 A 3.0003 3.0003 0 0 0 17.6875 26 z M 61.6875 26 A 3.0040663 3.0040663 0 1 0 62 32 L 82 32 A 3.0003 3.0003 0 1 0 82 26 L 62 26 A 3.0003 3.0003 0 0 0 61.6875 26 z M 17.6875 35 A 3.0040663 3.0040663 0 1 0 18 41 L 40 41 A 3.0003 3.0003 0 1 0 40 35 L 18 35 A 3.0003 3.0003 0 0 0 17.6875 35 z M 59.6875 35 A 3.0040663 3.0040663 0 1 0 60 41 L 82 41 A 3.0003 3.0003 0 1 0 82 35 L 60 35 A 3.0003 3.0003 0 0 0 59.6875 35 z M 17.6875 44 A 3.0040663 3.0040663 0 1 0 18 50 L 40 50 A 3.0003 3.0003 0 1 0 40 44 L 18 44 A 3.0003 3.0003 0 0 0 17.6875 44 z M 59.6875 44 A 3.0040663 3.0040663 0 1 0 60 50 L 82 50 A 3.0003 3.0003 0 1 0 82 44 L 60 44 A 3.0003 3.0003 0 0 0 59.6875 44 z M 17.6875 53 A 3.0040663 3.0040663 0 1 0 18 59 L 40 59 A 3.0003 3.0003 0 1 0 40 53 L 18 53 A 3.0003 3.0003 0 0 0 17.6875 53 z M 59.6875 53 A 3.0040663 3.0040663 0 1 0 60 59 L 82 59 A 3.0003 3.0003 0 1 0 82 53 L 60 53 A 3.0003 3.0003 0 0 0 59.6875 53 z M 17.6875 62 A 3.0040663 3.0040663 0 1 0 18 68 L 40 68 A 3.0003 3.0003 0 1 0 40 62 L 18 62 A 3.0003 3.0003 0 0 0 17.6875 62 z M 59.6875 62 A 3.0040663 3.0040663 0 1 0 60 68 L 82 68 A 3.0003 3.0003 0 1 0 82 62 L 60 62 A 3.0003 3.0003 0 0 0 59.6875 62 z")
    
    d3.selectAll("#path_book").attr("transform","scale(0.35) translate("+ d3.select("#valeur_histoire").attr("x")/0.35 +","+d3.select("#valeur_histoire").attr("y")/0.35+")")
    
    
}
}
    
function refreshAcces(acc1,acc2){
  if(acc1[1].voiture>0){histo_acces.append("path")
  					 .attr("d","M143.5,56.6l-4.1-1.7l-4.9-18c-2.1-7.8-9.3-13.2-17.4-13.2l-74.2,0h0c-8.1,0-15.2,5.5-17.4,13.2l-4.9,18l-4.1,1.7    C9.5,59.4,5,66.1,5,73.6l0,27.5c0,4.7,2.5,9,6.5,11.4v12.8c0,2.9,1.1,5.7,3.2,7.8c2.1,2.1,4.8,3.2,7.8,3.2h3.2c6,0,11-4.9,11-11    v-12h7.1c0.2,0,0.3,0,0.5,0c0.1,0,0.3,0,0.5,0l78.9,0l0,12c0,6,4.9,11,11,11h3.2c1.5,0,2.9-0.3,4.2-0.8c1.3-0.5,2.5-1.3,3.6-2.4    c2.1-2.1,3.2-4.8,3.2-7.8v-12.8c4-2.4,6.4-6.7,6.4-11.4l0-27.4C155,66.1,150.5,59.4,143.5,56.6z M28.5,90.8c-2.6,0-5.1-1-7-2.9    c-1.8-1.9-2.9-4.4-2.9-7c0-5.5,4.4-10,9.8-10c5.4,0,9.8,4.5,9.8,10S33.9,90.8,28.5,90.8z M106,96.2c-0.9,1.5-2.2,2.8-3.7,3.6    c-1.5,0.9-3.3,1.3-5,1.3H62.5c-3.6,0-6.9-1.9-8.8-4.9c-1.9-3.2-2-7.1-0.2-10.3c1.8-3.3,5.2-5.2,8.9-5.2c0,0,0,0,0,0h34.7    c3.8,0,7.1,2,8.9,5.2C108,89.1,107.9,93,106,96.2z M70.3,39.3c-0.6-0.9-1.9-1.1-2.8-0.5L45.7,54.4h-11L39,40.9    C40,38,42.6,36,45.7,36h68.5c3,0,5.7,2,6.7,4.8l4.4,13.5h-39l17.3-12.3c0.9-0.7,1.1-1.9,0.5-2.8c-0.6-0.9-1.9-1.1-2.8-0.5    L79.4,54.4l-26.8,0l17.3-12.3C70.7,41.4,70.9,40.2,70.3,39.3z M121.7,80.8c0-5.5,4.4-10,9.8-10c5.4,0,9.8,4.5,9.8,10    s-4.4,10-9.8,10C126.1,90.8,121.7,86.3,121.7,80.8z")
  					 .style("fill","#4d4dff")
  					 .attr("transform","scale("+ 0.5 +")")
  }
  
  
  if(acc1[1].transports>0){histo_acces.append("path")
  					 .attr("d","m 13.222,980.36216 c -1.00457,0.0646 -1.87574,0.99156 -1.87562,1.99575 l -1.7818503,0 c -3.06344,0.008 -5.97,3.43724 -6.06452,5.98724 -1e-5,9.05952 -2e-5,24.27575 0,27.94045 1.57801,0 3.39915,0 5.00167,0 0,-5.4875 4.5023403,-9.9787 10.0033403,-9.9787 5.50098,0 10.00333,4.4912 10.00333,9.9787 14.21651,0.057 28.75568,0.01 40.98243,0 0.0521,-5.4438 4.53445,-9.8852 10.00333,-9.8852 5.46879,0 9.95105,4.4416 10.00334,9.8852 1.72554,-3e-4 3.34416,0 4.84537,0 1.09834,0.086 2.16022,-0.8967 2.15697,-1.9957 l 0,-1.9958 c 0.0164,-1.0449 -0.92186,-2.0106 -1.96941,-2.0269 0.003,-3.7398 0.0151,-7.701 0.0312,-10.8207 0.011,-2.12025 -4.97039,-11.10135 -7.97141,-17.08859 l -47.29703,0 c -0.33641,-0.58182 -0.98399,-0.97185 -1.6568,-0.99788 -8.1076,-0.26413 -16.35175,-0.789 -24.41434,-0.99787 z m -2.06318,5.98724 6.65847,0 c 1.73688,0.0131 3.6169,0.72622 3.65747,2.4635 l 0,9.04324 c -0.325,2.08417 -2.01495,2.35276 -3.65747,2.46346 l -6.65847,0 c -1.7264603,-0.013 -3.6464303,-0.73536 -3.6887403,-2.46346 l 0,-9.04324 c 0.34325,-2.07653 2.04913,-2.35295 3.6887403,-2.4635 z m 16.00533,0 6.65848,0 c 1.73688,0.0131 3.6169,0.72622 3.65747,2.4635 l 0,9.04324 c -0.325,2.08417 -2.01495,2.35276 -3.65747,2.46346 l -6.65848,0 c -1.72645,-0.013 -3.64642,-0.73536 -3.68873,-2.46346 l 0,-9.04324 c 0.34325,-2.07653 2.04913,-2.35295 3.68873,-2.4635 z m 16.00534,0 6.65848,0 c 2.84425,0.35711 3.4121,0.23567 3.65747,2.4635 l 0,9.04324 c -0.325,2.08417 -2.01495,2.35276 -3.65747,2.46346 l -6.65848,0 c -1.72645,-0.013 -3.64642,-0.73536 -3.68873,-2.46346 l 0,-9.04324 c 0.34325,-2.07653 2.04913,-2.35295 3.68873,-2.4635 z m 16.00534,0 6.65848,0 c 1.73688,0.0131 3.6169,0.72622 3.65747,2.4635 l 0,9.04324 c -0.325,2.08417 -2.01495,2.35276 -3.65747,2.46346 l -6.65848,0 c -1.72645,-0.013 -3.64642,-0.73536 -3.68873,-2.46346 l 0,-9.04324 c 0.34325,-2.07653 2.04913,-2.35295 3.68873,-2.4635 z m 14.12972,0 c 2.71238,-7.3e-4 5.46445,0 8.19023,0 0.68797,-0.002 1.36456,0.3787 1.71932,0.96669 l 6.00201,9.97874 c 0.72705,1.20564 -0.30889,3.02817 -1.71933,3.02477 l -14.00467,0 c -1.04752,-1e-4 -2.00057,-0.95077 -2.00067,-1.99571 l 0,-9.97874 c -0.004,-0.98541 0.82961,-1.90328 1.81311,-1.99575 z m -54.79953,21.9532 c -4.41981,0 -8.00267,3.5741 -8.00267,7.983 0,4.409 3.58286,7.983 8.00267,7.983 4.4198,0 8.00267,-3.574 8.00267,-7.983 0,-4.4089 -3.58287,-7.983 -8.00267,-7.983 z m 60.98909,0.094 c -4.4198,0 -8.00267,3.5741 -8.00267,7.983 0,4.409 3.58287,7.983 8.00267,7.983 4.41981,0 8.00267,-3.574 8.00267,-7.983 0,-4.4089 -3.58286,-7.983 -8.00267,-7.983 z")
  					 .style("fill","#4d4dff")
  					 .attr("transform","scale("+ 0.8 +") translate(0 ,"+ -880 +")")
  }
  
  if(acc1[1].marche>0){histo_acces.append("path")
  					 .attr("d","M369.037,249.123l-54.716-17.144l-18.743-42.912c1.192-7.353-0.185-14.676-3.545-20.942l3.961-7.554  c0.145,0.001,0.285,0.021,0.431,0.021c22.523,0,40.782-18.259,40.782-40.783c0-22.523-18.259-40.782-40.782-40.782  s-40.783,18.259-40.783,40.782c0,9.709,3.407,18.615,9.071,25.619l-2.775,5.296c-6.555,0.207-24.46,6.794-27.421,8.407  l-55.25,30.093c-3.631,1.472-6.785,4.033-8.96,7.413c-1.39,2.092-2.354,4.428-2.847,6.871l-17.922,60.796  c-3.006,10.197,2.824,20.901,13.022,23.908c10.197,3.006,20.901-2.824,23.908-13.021l16.17-54.856l16.622-9.053l-15.984,49.557  c-2.281,7.072-2.021,14.338,0.215,20.865l-69.476,112.596c-6.819,11.115-3.336,25.654,7.779,32.475  c11.115,6.818,25.654,3.336,32.475-7.779L241.782,309.6l29.741,34.539l5.361,64.375c1.082,12.995,12.495,22.653,25.49,21.57  c12.996-1.082,22.653-12.494,21.571-25.49l-5.799-69.621c-0.332-3.998-1.649-7.676-3.683-10.826  c-0.949-2.703-2.388-5.285-4.371-7.588l-40.155-46.633l8.046-24.948l4.247,9.722c1.182,2.706,2.925,4.986,5.014,6.801  c2.137,2.16,4.812,3.85,7.912,4.821l62.369,19.541c10.145,3.179,20.946-2.469,24.125-12.614  C384.83,263.104,379.183,252.301,369.037,249.123z")
  					 .style("fill","#4d4dff")
  					 .attr("transform","scale("+ 0.15 +") translate(0 ,"+ 125/0.15 +")")
  }
  
  if(acc1[1].velo>0){histo_acces.append("path")
  					 .attr("d","M76.182,39.364c-2.085,0-4.148,0.352-6.141,1.046l-6.252-12.5h7.483c1.354,0,2.455,1.101,2.455,2.455  s-1.102,2.455-2.455,2.455s-2.454,1.101-2.454,2.455s1.101,2.454,2.454,2.454c4.061,0,7.364-3.303,7.364-7.363S75.333,23,71.272,23  H59.818c-0.855,0-1.637,0.435-2.087,1.164c-0.452,0.729-0.492,1.623-0.109,2.389l1.498,2.993H38.426l-0.818-1.636h4.21  c1.354,0,2.455-1.101,2.455-2.455S43.172,23,41.818,23H30.364c-1.354,0-2.455,1.101-2.455,2.455s1.101,2.455,2.455,2.455h1.755  L34.165,32l-4.205,8.41c-1.994-0.694-4.056-1.046-6.141-1.046C13.441,39.364,5,47.805,5,58.182C5,68.559,13.441,77,23.818,77  c9.383,0,17.433-7.129,18.648-16.363h0.616c1.033,2.92,3.793,4.908,6.917,4.908c4.061,0,7.363-3.303,7.363-7.363  c0-1.891-0.749-3.709-2.077-5.084l7.805-15.608l2.562,5.125c-5.203,3.521-8.289,9.287-8.289,15.568  C57.363,68.559,65.806,77,76.182,77S95,68.559,95,58.182C95,47.805,86.558,39.364,76.182,39.364z M76.182,72.091  c-7.669,0-13.909-6.239-13.909-13.909c0-4.408,2.076-8.505,5.598-11.134l4.654,9.308c-0.285,0.566-0.434,1.189-0.434,1.826  c0,2.256,1.835,4.092,4.091,4.092c2.257,0,4.091-1.836,4.091-4.092c0-1.982-1.437-3.658-3.351-4.01l-4.66-9.32  c1.288-0.385,2.604-0.579,3.92-0.579c7.669,0,13.909,6.239,13.909,13.909S83.851,72.091,76.182,72.091z M50,60.637  c-0.178,0-0.367-0.027-0.732-0.127c-0.162-0.052-0.311-0.115-0.523-0.232c-0.75-0.451-1.199-1.234-1.199-2.096  c0-1.354,1.102-2.455,2.455-2.455c1.045,0,1.974,0.674,2.354,1.805c0.068,0.254,0.102,0.461,0.102,0.65  C52.455,59.535,51.354,60.637,50,60.637z M50,50.818c-0.299,0-0.603,0.02-0.908,0.059l-8.211-16.422H59.12l-8.212,16.422  C50.604,50.838,50.299,50.818,50,50.818z M23.818,44.273c1.316,0,2.631,0.194,3.92,0.579l-4.66,9.32  c-1.914,0.352-3.351,2.027-3.351,4.01c0,2.256,1.835,4.092,4.091,4.092c1.277,0,2.485-0.617,3.254-1.637h10.432  c-1.17,6.591-6.901,11.454-13.686,11.454c-7.67,0-13.909-6.239-13.909-13.909S16.148,44.273,23.818,44.273z M37.504,55.727H27.79  l4.339-8.679C34.973,49.17,36.885,52.259,37.504,55.727z M36.909,37.489l7.805,15.608c-0.728,0.756-1.282,1.648-1.631,2.629h-0.616  c-0.698-5.283-3.679-10.096-8.121-13.112L36.909,37.489z")
  					 .style("fill","#4d4dff")
  					 .attr("transform","scale("+ 0.7 +") translate( 0 ,"+ 180/0.7 +")")
  }
  
  if(acc2[1].voiture>0){histo_acces.append("path")
  					 .attr("d","M143.5,56.6l-4.1-1.7l-4.9-18c-2.1-7.8-9.3-13.2-17.4-13.2l-74.2,0h0c-8.1,0-15.2,5.5-17.4,13.2l-4.9,18l-4.1,1.7    C9.5,59.4,5,66.1,5,73.6l0,27.5c0,4.7,2.5,9,6.5,11.4v12.8c0,2.9,1.1,5.7,3.2,7.8c2.1,2.1,4.8,3.2,7.8,3.2h3.2c6,0,11-4.9,11-11    v-12h7.1c0.2,0,0.3,0,0.5,0c0.1,0,0.3,0,0.5,0l78.9,0l0,12c0,6,4.9,11,11,11h3.2c1.5,0,2.9-0.3,4.2-0.8c1.3-0.5,2.5-1.3,3.6-2.4    c2.1-2.1,3.2-4.8,3.2-7.8v-12.8c4-2.4,6.4-6.7,6.4-11.4l0-27.4C155,66.1,150.5,59.4,143.5,56.6z M28.5,90.8c-2.6,0-5.1-1-7-2.9    c-1.8-1.9-2.9-4.4-2.9-7c0-5.5,4.4-10,9.8-10c5.4,0,9.8,4.5,9.8,10S33.9,90.8,28.5,90.8z M106,96.2c-0.9,1.5-2.2,2.8-3.7,3.6    c-1.5,0.9-3.3,1.3-5,1.3H62.5c-3.6,0-6.9-1.9-8.8-4.9c-1.9-3.2-2-7.1-0.2-10.3c1.8-3.3,5.2-5.2,8.9-5.2c0,0,0,0,0,0h34.7    c3.8,0,7.1,2,8.9,5.2C108,89.1,107.9,93,106,96.2z M70.3,39.3c-0.6-0.9-1.9-1.1-2.8-0.5L45.7,54.4h-11L39,40.9    C40,38,42.6,36,45.7,36h68.5c3,0,5.7,2,6.7,4.8l4.4,13.5h-39l17.3-12.3c0.9-0.7,1.1-1.9,0.5-2.8c-0.6-0.9-1.9-1.1-2.8-0.5    L79.4,54.4l-26.8,0l17.3-12.3C70.7,41.4,70.9,40.2,70.3,39.3z M121.7,80.8c0-5.5,4.4-10,9.8-10c5.4,0,9.8,4.5,9.8,10    s-4.4,10-9.8,10C126.1,90.8,121.7,86.3,121.7,80.8z")
  					 .style("fill","DarkOrange")
  					 .attr("transform"," scale("+ 0.5 +") translate("+ 200 +",0)")
  }
  
 
  if(acc2[1].transports>0){histo_acces.append("path")
  					 .attr("d","m 13.222,980.36216 c -1.00457,0.0646 -1.87574,0.99156 -1.87562,1.99575 l -1.7818503,0 c -3.06344,0.008 -5.97,3.43724 -6.06452,5.98724 -1e-5,9.05952 -2e-5,24.27575 0,27.94045 1.57801,0 3.39915,0 5.00167,0 0,-5.4875 4.5023403,-9.9787 10.0033403,-9.9787 5.50098,0 10.00333,4.4912 10.00333,9.9787 14.21651,0.057 28.75568,0.01 40.98243,0 0.0521,-5.4438 4.53445,-9.8852 10.00333,-9.8852 5.46879,0 9.95105,4.4416 10.00334,9.8852 1.72554,-3e-4 3.34416,0 4.84537,0 1.09834,0.086 2.16022,-0.8967 2.15697,-1.9957 l 0,-1.9958 c 0.0164,-1.0449 -0.92186,-2.0106 -1.96941,-2.0269 0.003,-3.7398 0.0151,-7.701 0.0312,-10.8207 0.011,-2.12025 -4.97039,-11.10135 -7.97141,-17.08859 l -47.29703,0 c -0.33641,-0.58182 -0.98399,-0.97185 -1.6568,-0.99788 -8.1076,-0.26413 -16.35175,-0.789 -24.41434,-0.99787 z m -2.06318,5.98724 6.65847,0 c 1.73688,0.0131 3.6169,0.72622 3.65747,2.4635 l 0,9.04324 c -0.325,2.08417 -2.01495,2.35276 -3.65747,2.46346 l -6.65847,0 c -1.7264603,-0.013 -3.6464303,-0.73536 -3.6887403,-2.46346 l 0,-9.04324 c 0.34325,-2.07653 2.04913,-2.35295 3.6887403,-2.4635 z m 16.00533,0 6.65848,0 c 1.73688,0.0131 3.6169,0.72622 3.65747,2.4635 l 0,9.04324 c -0.325,2.08417 -2.01495,2.35276 -3.65747,2.46346 l -6.65848,0 c -1.72645,-0.013 -3.64642,-0.73536 -3.68873,-2.46346 l 0,-9.04324 c 0.34325,-2.07653 2.04913,-2.35295 3.68873,-2.4635 z m 16.00534,0 6.65848,0 c 2.84425,0.35711 3.4121,0.23567 3.65747,2.4635 l 0,9.04324 c -0.325,2.08417 -2.01495,2.35276 -3.65747,2.46346 l -6.65848,0 c -1.72645,-0.013 -3.64642,-0.73536 -3.68873,-2.46346 l 0,-9.04324 c 0.34325,-2.07653 2.04913,-2.35295 3.68873,-2.4635 z m 16.00534,0 6.65848,0 c 1.73688,0.0131 3.6169,0.72622 3.65747,2.4635 l 0,9.04324 c -0.325,2.08417 -2.01495,2.35276 -3.65747,2.46346 l -6.65848,0 c -1.72645,-0.013 -3.64642,-0.73536 -3.68873,-2.46346 l 0,-9.04324 c 0.34325,-2.07653 2.04913,-2.35295 3.68873,-2.4635 z m 14.12972,0 c 2.71238,-7.3e-4 5.46445,0 8.19023,0 0.68797,-0.002 1.36456,0.3787 1.71932,0.96669 l 6.00201,9.97874 c 0.72705,1.20564 -0.30889,3.02817 -1.71933,3.02477 l -14.00467,0 c -1.04752,-1e-4 -2.00057,-0.95077 -2.00067,-1.99571 l 0,-9.97874 c -0.004,-0.98541 0.82961,-1.90328 1.81311,-1.99575 z m -54.79953,21.9532 c -4.41981,0 -8.00267,3.5741 -8.00267,7.983 0,4.409 3.58286,7.983 8.00267,7.983 4.4198,0 8.00267,-3.574 8.00267,-7.983 0,-4.4089 -3.58287,-7.983 -8.00267,-7.983 z m 60.98909,0.094 c -4.4198,0 -8.00267,3.5741 -8.00267,7.983 0,4.409 3.58287,7.983 8.00267,7.983 4.41981,0 8.00267,-3.574 8.00267,-7.983 0,-4.4089 -3.58286,-7.983 -8.00267,-7.983 z")
  					 .style("fill","DarkOrange")
  					 .attr("transform","scale("+ 0.8 +") translate("+ 120 +","+ -880 +")" )
  }
  
  if(acc2[1].marche>0){histo_acces.append("path")
  					 .attr("d","M369.037,249.123l-54.716-17.144l-18.743-42.912c1.192-7.353-0.185-14.676-3.545-20.942l3.961-7.554  c0.145,0.001,0.285,0.021,0.431,0.021c22.523,0,40.782-18.259,40.782-40.783c0-22.523-18.259-40.782-40.782-40.782  s-40.783,18.259-40.783,40.782c0,9.709,3.407,18.615,9.071,25.619l-2.775,5.296c-6.555,0.207-24.46,6.794-27.421,8.407  l-55.25,30.093c-3.631,1.472-6.785,4.033-8.96,7.413c-1.39,2.092-2.354,4.428-2.847,6.871l-17.922,60.796  c-3.006,10.197,2.824,20.901,13.022,23.908c10.197,3.006,20.901-2.824,23.908-13.021l16.17-54.856l16.622-9.053l-15.984,49.557  c-2.281,7.072-2.021,14.338,0.215,20.865l-69.476,112.596c-6.819,11.115-3.336,25.654,7.779,32.475  c11.115,6.818,25.654,3.336,32.475-7.779L241.782,309.6l29.741,34.539l5.361,64.375c1.082,12.995,12.495,22.653,25.49,21.57  c12.996-1.082,22.653-12.494,21.571-25.49l-5.799-69.621c-0.332-3.998-1.649-7.676-3.683-10.826  c-0.949-2.703-2.388-5.285-4.371-7.588l-40.155-46.633l8.046-24.948l4.247,9.722c1.182,2.706,2.925,4.986,5.014,6.801  c2.137,2.16,4.812,3.85,7.912,4.821l62.369,19.541c10.145,3.179,20.946-2.469,24.125-12.614  C384.83,263.104,379.183,252.301,369.037,249.123z")
  					 .style("fill","DarkOrange")
  					 .attr("transform","scale("+ 0.15 +") translate("+ 100/0.15+","+ 125/0.15 +")")
  }
  
  if(acc2[1].velo>0){histo_acces.append("path")
  					 .attr("d","M76.182,39.364c-2.085,0-4.148,0.352-6.141,1.046l-6.252-12.5h7.483c1.354,0,2.455,1.101,2.455,2.455  s-1.102,2.455-2.455,2.455s-2.454,1.101-2.454,2.455s1.101,2.454,2.454,2.454c4.061,0,7.364-3.303,7.364-7.363S75.333,23,71.272,23  H59.818c-0.855,0-1.637,0.435-2.087,1.164c-0.452,0.729-0.492,1.623-0.109,2.389l1.498,2.993H38.426l-0.818-1.636h4.21  c1.354,0,2.455-1.101,2.455-2.455S43.172,23,41.818,23H30.364c-1.354,0-2.455,1.101-2.455,2.455s1.101,2.455,2.455,2.455h1.755  L34.165,32l-4.205,8.41c-1.994-0.694-4.056-1.046-6.141-1.046C13.441,39.364,5,47.805,5,58.182C5,68.559,13.441,77,23.818,77  c9.383,0,17.433-7.129,18.648-16.363h0.616c1.033,2.92,3.793,4.908,6.917,4.908c4.061,0,7.363-3.303,7.363-7.363  c0-1.891-0.749-3.709-2.077-5.084l7.805-15.608l2.562,5.125c-5.203,3.521-8.289,9.287-8.289,15.568  C57.363,68.559,65.806,77,76.182,77S95,68.559,95,58.182C95,47.805,86.558,39.364,76.182,39.364z M76.182,72.091  c-7.669,0-13.909-6.239-13.909-13.909c0-4.408,2.076-8.505,5.598-11.134l4.654,9.308c-0.285,0.566-0.434,1.189-0.434,1.826  c0,2.256,1.835,4.092,4.091,4.092c2.257,0,4.091-1.836,4.091-4.092c0-1.982-1.437-3.658-3.351-4.01l-4.66-9.32  c1.288-0.385,2.604-0.579,3.92-0.579c7.669,0,13.909,6.239,13.909,13.909S83.851,72.091,76.182,72.091z M50,60.637  c-0.178,0-0.367-0.027-0.732-0.127c-0.162-0.052-0.311-0.115-0.523-0.232c-0.75-0.451-1.199-1.234-1.199-2.096  c0-1.354,1.102-2.455,2.455-2.455c1.045,0,1.974,0.674,2.354,1.805c0.068,0.254,0.102,0.461,0.102,0.65  C52.455,59.535,51.354,60.637,50,60.637z M50,50.818c-0.299,0-0.603,0.02-0.908,0.059l-8.211-16.422H59.12l-8.212,16.422  C50.604,50.838,50.299,50.818,50,50.818z M23.818,44.273c1.316,0,2.631,0.194,3.92,0.579l-4.66,9.32  c-1.914,0.352-3.351,2.027-3.351,4.01c0,2.256,1.835,4.092,4.091,4.092c1.277,0,2.485-0.617,3.254-1.637h10.432  c-1.17,6.591-6.901,11.454-13.686,11.454c-7.67,0-13.909-6.239-13.909-13.909S16.148,44.273,23.818,44.273z M37.504,55.727H27.79  l4.339-8.679C34.973,49.17,36.885,52.259,37.504,55.727z M36.909,37.489l7.805,15.608c-0.728,0.756-1.282,1.648-1.631,2.629h-0.616  c-0.698-5.283-3.679-10.096-8.121-13.112L36.909,37.489z")
  					 .style("fill","DarkOrange")
  					 .attr("transform","scale("+ 0.7 +") translate("+ 100/0.7+","+ 180/0.7 +")")
  }
}
    
function refreshMotif(mot1,mot2){
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 6+y_motif('Divers')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot1[1].divers)})
  					 .style("fill","#4d4dff")
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 6+y_motif('Travail quoti.')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot1[1].commute)})
  					 .style("fill","#4d4dff")
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 6+y_motif('Etudes')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot1[1].etudes)})
  					 .style("fill","#4d4dff")
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 6+y_motif('Travail Occasionnel')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot1[1].occasionnel)})
  					 .style("fill","#4d4dff")
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 6+y_motif('Loisirs')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot1[1].loisirs)})
  					 .style("fill","#4d4dff")
  
  
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 26+y_motif('Divers')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot2[1].divers)})
  					 .style("fill","DarkOrange")
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 26+y_motif('Travail quoti.')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot2[1].commute)})
  					 .style("fill","DarkOrange")
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 26+y_motif('Etudes')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot2[1].etudes)})
  					 .style("fill","DarkOrange")
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 26+y_motif('Travail Occasionnel')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot2[1].occasionnel)})
  					 .style("fill","DarkOrange")
  
  histo_motif.append("rect")
  					 .attr("x",0)
  					 .attr("y",function(){return 26+y_motif('Loisirs')})
  					 .attr("height",20)
  					 .attr("width",function(){return x_motif(mot2[1].loisirs)})
  					 .style("fill","DarkOrange")
}
  </script>
</div>
</body>